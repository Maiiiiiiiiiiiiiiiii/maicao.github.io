<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Xiushui</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inconsolata:wght@300;600&family=Nunito&display=swap');
    
    body {
      font-family: sans-serif;
      padding: 0;
      margin: 0;
      background: white;
    }
    
    .container {
      position: relative;
      width: 1024px;
      height: 768px;
      overflow-y: scroll;
      background: #FFFFFF;
      margin: 0 auto;
    }
    
    .title {
      position: absolute;
      width: 126px;
      height: 38px;
      left: 54px;
      top: 80px;
      font-family: 'Inconsolata';
      font-style: normal;
      font-weight: 600;
      font-size: 36px;
      line-height: 38px;
      color: #000000;
    }
    
    .location-label {
      position: absolute;
      width: 52px;
      height: 14px;
      left: 59px;
      top: 230px;
      font-family: 'Inconsolata';
      font-style: normal;
      font-weight: 600;
      font-size: 13px;
      line-height: 14px;
      color: #000000;
    }
    
    .date-label {
      position: absolute;
      width: 26px;
      height: 14px;
      left: 59px;
      top: 250px;
      font-family: 'Inconsolata';
      font-style: normal;
      font-weight: 600;
      font-size: 13px;
      line-height: 14px;
      color: #000000;
    }
    
    .tags-label {
      position: absolute;
      width: 26px;
      height: 14px;
      left: 59px;
      top: 309px;
      font-family: 'Inconsolata';
      font-style: normal;
      font-weight: 600;
      font-size: 13px;
      line-height: 14px;
      color: #000000;
    }
    
    .author-label {
      position: absolute;
      width: 39px;
      height: 14px;
      left: 59px;
      top: 269px;
      font-family: 'Inconsolata';
      font-style: normal;
      font-weight: 600;
      font-size: 13px;
      line-height: 14px;
      color: #000000;
    }
    
    .tutor-label {
      position: absolute;
      width: 33px;
      height: 14px;
      left: 59px;
      top: 289px;
      font-family: 'Inconsolata';
      font-style: normal;
      font-weight: 600;
      font-size: 13px;
      line-height: 14px;
      color: #000000;
    }
    
    .location {
      position: absolute;
      width: 98px;
      height: 14px;
      left: 256px;
      top: 230px;
      font-family: 'Inconsolata';
      font-style: normal;
      font-weight: 300;
      font-size: 13px;
      line-height: 14px;
      text-align: right;
      color: #000000;
    }
    
    .date {
      position: absolute;
      width: 98px;
      height: 14px;
      left: 256px;
      top: 250px;
      font-family: 'Inconsolata';
      font-style: normal;
      font-weight: 300;
      font-size: 13px;
      line-height: 14px;
      text-align: right;
      color: #000000;
    }
    
    .tags1 {
      position: absolute;
      width: 189px;
      height: 14px;
      left: 165px;
      top: 309px;
      font-family: 'Inconsolata';
      font-style: normal;
      font-weight: 300;
      font-size: 13px;
      line-height: 14px;
      text-align: right;
      color: #000000;
    }
    
    .tags2 {
      position: absolute;
      width: 215px;
      height: 14px;
      left: 139px;
      top: 330px;
      font-family: 'Inconsolata';
      font-style: normal;
      font-weight: 300;
      font-size: 13px;
      line-height: 14px;
      text-align: right;
      color: #000000;
    }
    
    .author {
      position: absolute;
      width: 46px;
      height: 14px;
      left: 308px;
      top: 269px;
      font-family: 'Inconsolata';
      font-style: normal;
      font-weight: 300;
      font-size: 13px;
      line-height: 14px;
      text-align: right;
      color: #000000;
    }
    
    .tutor {
      position: absolute;
      width: 46px;
      height: 14px;
      left: 308px;
      top: 289px;
      font-family: 'Inconsolata';
      font-style: normal;
      font-weight: 300;
      font-size: 13px;
      line-height: 14px;
      text-align: right;
      color: #000000;
    }
    
    .line1, .line2, .line3, .line4, .line5, .line6, .line7 {
      position: absolute;
      width: 300px;
      height: 0px;
      left: 54px;
      border: 0.5px solid #000000;
    }
    
    .line1 { top: 227px; }
    .line2 { top: 247px; }
    .line3 { top: 247px; }
    .line4 { top: 267px; }
    .line5 { top: 287px; }
    .line6 { top: 307px; }
    .line7 { top: 347px; }
    
    .description-chinese {
      position: absolute;
      width: 433px;
      height: 203px;
      left: 54px;
      top: 397px;
      font-family: 'Nunito';
      font-style: normal;
      font-weight: 400;
      font-size: 13px;
      line-height: 19px;
      text-align: justify;
      letter-spacing: 0.05em;
      color: #000000;
    }
    
    .description-english {
      position: absolute;
      width: 433px;
      height: 287px;
      left: 537px;
      top: 397px;
      font-family: 'Nunito';
      font-style: normal;
      font-weight: 400;
      font-size: 13px;
      line-height: 18px;
      text-align: justify;
      color: #000000;
    }

    /* Image Viewer Styles */
    .pdf-container {
      position: absolute;
      width: 916px;
      height: 648px;
      left: 50%;
      transform: translateX(-50%);
      top: 900px;
      border: 1px solid #ccc;
      overflow: hidden;
      margin-bottom: 100px;
    }

    .image-viewer-wrapper {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: auto;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .pdf-image {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      transition: transform 0.1s ease;
      transform-origin: center center;
    }

    .pdf-controls {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 10;
      background: rgba(255, 255, 255, 0.9);
      padding: 8px 15px;
      border-radius: 5px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .pdf-controls button {
      padding: 5px 10px;
      cursor: pointer;
      background: #f0f0f0;
      border: 1px solid #ccc;
      border-radius: 3px;
      font-family: 'Inconsolata';
      font-size: 12px;
    }

    .pdf-controls button:hover {
      background: #e0e0e0;
    }

    .pdf-page-info {
      display: flex;
      align-items: center;
      gap: 5px;
      font-family: 'Inconsolata';
      font-size: 13px;
    }

    .pdf-page-input {
      width: 40px;
      padding: 3px;
      text-align: center;
      font-family: 'Inconsolata';
      border: 1px solid #ccc;
      border-radius: 3px;
    }

    .image-viewer-wrapper.grabbing {
      cursor: grabbing;
    }

    .image-viewer-wrapper:hover {
      cursor: grab;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="title">Xiushui</div>
    
    <div class="location-label">Location</div>
    <div class="date-label">Date</div>
    <div class="tags-label">Tags</div>
    <div class="author-label">Author</div>
    <div class="tutor-label">Tutor</div>
    
    <div class="location">Xiushui, Fujian</div>
    <div class="date">2024.02-2024.06</div>
    <div class="tags1">Architectural Design Project,</div>
    <div class="tags2">Preservation / Adaptive Project</div>
    <div class="author">Mai Cao</div>
    <div class="tutor">Hui Luo</div>
    
    <div class="line1"></div>
    <div class="line2"></div>
    <div class="line3"></div>
    <div class="line4"></div>
    <div class="line5"></div>
    <div class="line6"></div>
    <div class="line7"></div>
    
    <div class="description-chinese">
      这是我的毕业设计项目，能够走进乡村与田野开展调研，是一次非常宝贵且难忘的经历。在调研过程中，我接触到不同姓氏和年龄的人，通过一个个线索的整合与推理，逐步还原出场地的历史。每一次发现都像是挖掘出一件珍贵宝藏——比如乾隆年间的大火、地震遗留下来的建筑残迹、家族之间围绕土地的纷争、以及时代变迁中家族的兴衰……我们走访的过程中，秀水的历史一点点被拼凑出来。我从领土层级、村落层级到建筑层级三个层面，对场地进行了全面的理解，结合资料查阅、实地调研与测绘分析，最终基于这些认识，提出了地方规划与观音堂片区更新的详细设计方案。
    </div>
    
    <div class="description-english">
      This is my graduation design project. Being able to explore the countryside and engage with the land firsthand was an incredibly valuable and unforgettable experience. During the research, I interacted with people of various surnames and ages, collecting clues piece by piece, which I then integrated and analyzed to reconstruct the site's history. Each new discovery felt like unearthing a hidden treasure—whether it was a great fire during the Qianlong period, remnants of buildings left by earthquakes, family disputes over land, or the rise and fall of lineages shaped by changing times. Through field visits, the layered history of Xiushui gradually came to light. I developed a comprehensive understanding of the site at the territorial, village, and architectural levels by conducting data analysis, on-site research, and surveying. Based on this foundation, I proposed a detailed plan for regional development and the renewal of the Guanyin Temple area.
    </div>

    <!-- Image Viewer Section -->
    <div class="pdf-container">
      <div class="image-viewer-wrapper" id="image-viewer-wrapper">
        <img id="pdf-image" class="pdf-image" src="" alt="PDF Page">
      </div>
      <div class="pdf-controls">
        <button id="prev-page">Previous</button>
        <span class="pdf-page-info">
          Page <input type="number" id="page-input" class="pdf-page-input" min="1" value="1"> 
          of <span id="page-count">37</span>
        </span>
        <button id="next-page">Next</button>
        <button id="zoom-in">Zoom In</button>
        <button id="zoom-out">Zoom Out</button>
        <button id="fit-page">Fit Page</button>
      </div>
    </div>
  </div>

  <script>
    // Image viewer variables
    const totalPages = 37; // Total number of pages/images
    let currentPage = 1;
    let scale = 1.0;
    let isDragging = false;
    let startPos = { x: 0, y: 0 };
    let currentTranslate = { x: 0, y: 0 };
    const maxScale = 3.0;
    const minScale = 0.5;
    
    const imageElement = document.getElementById('pdf-image');
    const wrapper = document.getElementById('image-viewer-wrapper');
    const pageCountElement = document.getElementById('page-count');
    const pageInput = document.getElementById('page-input');
    
    // Initialize the viewer
    function initViewer() {
      pageCountElement.textContent = totalPages;
      pageInput.max = totalPages;
      loadPage(1);
    }
    
    // Load a specific page
    function loadPage(pageNum) {
      if (pageNum < 1 || pageNum > totalPages) return;
      
      currentPage = pageNum;
      imageElement.src = `../assets/doc/a-9/a-9-${pageNum}.jpg`;
      pageInput.value = pageNum;
      
      // Reset zoom and position when changing pages
      scale = 1.0;
      currentTranslate = { x: 0, y: 0 };
      updateImageTransform();
    }
    
    // Update the image transform (scale + position)
    function updateImageTransform() {
      imageElement.style.transform = `translate(${currentTranslate.x}px, ${currentTranslate.y}px) scale(${scale})`;
    }
    
    // Fit the image to the container
    function fitToPage() {
      const containerWidth = wrapper.offsetWidth;
      const containerHeight = wrapper.offsetHeight;
      
      imageElement.onload = function() {
        const imgWidth = this.naturalWidth;
        const imgHeight = this.naturalHeight;
        
        const widthRatio = containerWidth / imgWidth;
        const heightRatio = containerHeight / imgHeight;
        
        scale = Math.min(widthRatio, heightRatio);
        currentTranslate = { x: 0, y: 0 };
        updateImageTransform();
      };
      
      // Reload the image to trigger onload if it's already loaded
      if (imageElement.complete) {
        imageElement.onload();
      }
    }
    
    // Zoom in
    function zoomIn() {
      if (scale >= maxScale) return;
      scale *= 1.2;
      updateImageTransform();
    }
    
    // Zoom out
    function zoomOut() {
      if (scale <= minScale) return;
      scale /= 1.2;
      updateImageTransform();
    }
    
    // Go to previous page
    function prevPage() {
      loadPage(currentPage - 1);
    }
    
    // Go to next page
    function nextPage() {
      loadPage(currentPage + 1);
    }
    
    // Handle page input change
    function handlePageInput() {
      let newPage = parseInt(pageInput.value);
      
      if (isNaN(newPage) || newPage < 1) {
        newPage = 1;
      } else if (newPage > totalPages) {
        newPage = totalPages;
      }
      
      pageInput.value = newPage;
      
      if (newPage !== currentPage) {
        loadPage(newPage);
      }
    }
    
    // Mouse wheel zoom
    function handleWheel(e) {
      e.preventDefault();
      
      // Get mouse position relative to image
      const rect = imageElement.getBoundingClientRect();
      const mouseX = e.clientX - rect.left;
      const mouseY = e.clientY - rect.top;
      
      // Calculate scale factor
      const delta = -e.deltaY;
      let scaleFactor = 1.1;
      if (delta < 0) {
        scaleFactor = 1 / scaleFactor;
      }
      
      // Calculate new scale with limits
      const newScale = scale * scaleFactor;
      if (newScale < minScale || newScale > maxScale) return;
      
      // Calculate mouse position in image coordinates
      const imgX = (mouseX - currentTranslate.x) / scale;
      const imgY = (mouseY - currentTranslate.y) / scale;
      
      // Apply new scale
      scale = newScale;
      
      // Calculate new translation to keep mouse position stable
      currentTranslate.x = mouseX - imgX * scale;
      currentTranslate.y = mouseY - imgY * scale;
      
      updateImageTransform();
    }
    
    // Dragging functionality
    function startDrag(e) {
      isDragging = true;
      startPos = {
        x: e.clientX - currentTranslate.x,
        y: e.clientY - currentTranslate.y
      };
      wrapper.style.cursor = 'grabbing';
      e.preventDefault();
    }
    
    function drag(e) {
      if (!isDragging) return;
      
      currentTranslate.x = e.clientX - startPos.x;
      currentTranslate.y = e.clientY - startPos.y;
      
      updateImageTransform();
    }
    
    function endDrag() {
      isDragging = false;
      wrapper.style.cursor = 'grab';
    }
    
    // Event listeners
    document.getElementById('prev-page').addEventListener('click', prevPage);
    document.getElementById('next-page').addEventListener('click', nextPage);
    document.getElementById('zoom-in').addEventListener('click', zoomIn);
    document.getElementById('zoom-out').addEventListener('click', zoomOut);
    document.getElementById('fit-page').addEventListener('click', fitToPage);
    pageInput.addEventListener('change', handlePageInput);
    
    // Mouse events for dragging
    wrapper.addEventListener('mousedown', startDrag);
    window.addEventListener('mousemove', drag);
    window.addEventListener('mouseup', endDrag);
    
    // Mouse wheel for zooming
    wrapper.addEventListener('wheel', handleWheel, { passive: false });
    
    // Initialize the viewer when the page loads
    window.addEventListener('load', initViewer);
  </script>
</body>
</html>
